<!doctype html>
<html>
  <head>
    <title>Labshop Admin Panel - Pro</title>
    <link rel="stylesheet" href="/admin.css" />
  </head>
  <body>
    <h1>
      Labshop Manager Dashboard
      <button class="btn-logout" onclick="logout()">Logout</button>
    </h1>

    <div
      id="admin_greeting"
      style="margin-bottom: 20px; font-weight: bold; color: #555"
    ></div>

    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px">
      <div>
        <div class="card capture-box">
          <h3>Link IC Card</h3>
          <span id="status_msg">üîç Scanning for new card taps...</span>
          <div class="input-group">
            <label>Detected UID:</label>
            <input
              type="text"
              id="uid"
              readonly
              placeholder="Tap card on Reader 5..."
            />
          </div>
          <div class="input-group">
            <label>Assign to Student ID:</label>
            <input type="number" id="link_sid" />
          </div>
          <button class="btn-primary" onclick="registerCard()">
            Connect Card to Student
          </button>
        </div>
        <div class="card cards">
          <h2>IC Cards</h2>
          <div class="input-group">
            <input
              type="text"
              id="cardSearch"
              placeholder="Search UID or Student ID..."
              onkeyup="filterCards()"
            />
          </div>
          <table id="cardTable" class="styled-table">
            <thead>
              <tr>
                <th>UID</th>
                <th>Student ID</th>
                <th>Status</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody>
              <!-- Filled by js -->
            </tbody>
          </table>
          <div class="pager">
            <button id="cardsPrev" onclick="cardsPrevPage()">‚Äπ</button>
            <span id="cardsPageInfo">1 / 1</span>
            <button id="cardsNext" onclick="cardsNextPage()">‚Ä∫</button>
          </div>
        </div>

        <div class="card">
          <h3>Add New Student</h3>
          <div class="input-group">
            <label>Student ID:</label><input type="number" id="sid" />
          </div>
          <div class="input-group">
            <label>First Name:</label><input type="text" id="fname" />
          </div>
          <div class="input-group">
            <label>Last Name:</label><input type="text" id="lname" />
          </div>
          <button class="btn-success" onclick="createUser()">
            Save New Student
          </button>
        </div>
        <div class="card users">
          <h2>All Users</h2>
          <div class="input-group">
            <input
              type="text"
              id="allUserSearch"
              placeholder="Search Name or ID..."
              onkeyup="filterAllUsers()"
            />
          </div>
          <table id="allUserTable" class="styled-table">
            <thead>
              <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Status</th>
                <th>Balance</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody>
              <!-- Filled by JS -->
            </tbody>
          </table>
          <div class="pager">
            <button
              class="pager-btn"
              id="allUsersPrev"
              onclick="allUsersPrevPage()"
              aria-label="Previous page"
            >
              &#x2039;
            </button>

            <span class="pager-info" id="allUsersPageInfo">1 / 1</span>

            <button
              class="pager-btn"
              id="allUsersNext"
              onclick="allUsersNextPage()"
              aria-label="Next page"
            >
              &#x203A;
            </button>
          </div>
        </div>
      </div>

      <div>
        <div class="card">
          <h3>Live Student Debt List</h3>
          <div class="input-group">
            <input
              type="text"
              id="studentSearch"
              placeholder="üîç Search Name or ID..."
              onkeyup="filterStudents()"
            />
          </div>
          <button class="btn-refresh" onclick="loadUsers()">
            Manual Refresh
          </button>
          <table id="userTable">
            <thead>
              <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Debt</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
          <div class="pager">
            <button id="debtPrev" onclick="debtPrevPage()">‚Äπ</button>
            <span id="debtPageInfo">1 / 1</span>
            <button id="debtNext" onclick="debtNextPage()">‚Ä∫</button>
          </div>
        </div>

        <div class="card" style="border-top: 4px solid #ffc107">
          <h3>‚öôÔ∏è System Settings</h3>
          <div class="input-group">
            <label>Maximum Debt Limit (¬•):</label>
            <input type="number" id="max_debt_limit" />
          </div>
          <button
            class="btn-primary"
            style="background: #ffc107; color: #333"
            onclick="updateMaxDebt()"
          >
            Update Limit
          </button>
        </div>

        <div class="card">
          <h3>Recent Activity</h3>
          <table id="activityTable">
            <thead>
              <tr>
                <th>Time</th>
                <th>Student</th>
                <th>Type</th>
                <th>Amount</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
          <div class="pager">
            <button id="activityPrev" onclick="activityPrevPage()">‚Äπ</button>
            <span id="activityPageInfo">1 / 1</span>
            <button id="activityNext" onclick="activityNextPage()">‚Ä∫</button>
          </div>
        </div>
      </div>
    </div>

    <script src="/admin.js"></script>
  </body>
</html>
